(()=>{var e={};e.id=1837,e.ids=[1837],e.modules={47849:e=>{"use strict";e.exports=require("next/dist/client/components/action-async-storage.external")},72934:e=>{"use strict";e.exports=require("next/dist/client/components/action-async-storage.external.js")},55403:e=>{"use strict";e.exports=require("next/dist/client/components/request-async-storage.external")},54580:e=>{"use strict";e.exports=require("next/dist/client/components/request-async-storage.external.js")},94749:e=>{"use strict";e.exports=require("next/dist/client/components/static-generation-async-storage.external")},45869:e=>{"use strict";e.exports=require("next/dist/client/components/static-generation-async-storage.external.js")},20399:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},14300:e=>{"use strict";e.exports=require("buffer")},6113:e=>{"use strict";e.exports=require("crypto")},82361:e=>{"use strict";e.exports=require("events")},13685:e=>{"use strict";e.exports=require("http")},95687:e=>{"use strict";e.exports=require("https")},41808:e=>{"use strict";e.exports=require("net")},85477:e=>{"use strict";e.exports=require("punycode")},12781:e=>{"use strict";e.exports=require("stream")},24404:e=>{"use strict";e.exports=require("tls")},57310:e=>{"use strict";e.exports=require("url")},59796:e=>{"use strict";e.exports=require("zlib")},10216:(e,t,r)=>{"use strict";r.r(t),r.d(t,{GlobalError:()=>l.a,__next_app__:()=>m,originalPathname:()=>u,pages:()=>c,routeModule:()=>p,tree:()=>d});var s=r(50482),a=r(69108),n=r(62563),l=r.n(n),i=r(68300),o={};for(let e in i)0>["default","tree","pages","GlobalError","originalPathname","__next_app__","routeModule"].indexOf(e)&&(o[e]=()=>i[e]);r.d(t,o);let d=["",{children:["dashboard",{children:["reviews",{children:["external",{children:["__PAGE__",{},{page:[()=>Promise.resolve().then(r.bind(r,10801)),"/Users/ulrikdalanfjellstad/Desktop/Revlo/app/dashboard/reviews/external/page.tsx"]}]},{}]},{}]},{layout:[()=>Promise.resolve().then(r.bind(r,96339)),"/Users/ulrikdalanfjellstad/Desktop/Revlo/app/dashboard/layout.tsx"]}]},{layout:[()=>Promise.resolve().then(r.bind(r,91429)),"/Users/ulrikdalanfjellstad/Desktop/Revlo/app/layout.tsx"],"not-found":[()=>Promise.resolve().then(r.t.bind(r,69361,23)),"next/dist/client/components/not-found-error"]}],c=["/Users/ulrikdalanfjellstad/Desktop/Revlo/app/dashboard/reviews/external/page.tsx"],u="/dashboard/reviews/external/page",m={require:r,loadChunk:()=>Promise.resolve()},p=new s.AppPageRouteModule({definition:{kind:a.x.APP_PAGE,page:"/dashboard/reviews/external/page",pathname:"/dashboard/reviews/external",bundlePath:"",filename:"",appPaths:[]},userland:{loaderTree:d}})},84177:(e,t,r)=>{Promise.resolve().then(r.bind(r,99076))},99076:(e,t,r)=>{"use strict";r.r(t),r.d(t,{default:()=>h});var s=r(95344),a=r(3729),n=r(57435),l=r(61351),i=r(63954),o=r(15746),d=r(91626),c=r(65849),u=r(88263),m=r(8428),p=r(76368),f=r(25092),x=r(62312),g=r(14513);function h(){let[e,t]=(0,a.useState)([]),[r,h]=(0,a.useState)([]),[v,b]=(0,a.useState)(!0),[j,y]=(0,a.useState)(null),N=(0,n.createClientComponentClient)();(0,m.useRouter)();let{toast:k}=(0,f.p)(),w=e=>{let t=[{platform:"google",data:[{author:"Maria G.",rating:5,content:"Kjempegod opplevelse og rask respons! Jeg var veldig forn\xf8yd med tjenesten.",published_at:"2024-03-15"},{author:"Johan L.",rating:4,content:"God service og hyggelige ansatte. Kunne v\xe6rt litt raskere, men ellers bra.",published_at:"2024-04-02"},{author:"Erik M.",rating:5,content:"Utmerket kundeservice! Rask og effektiv hjelp. Vil absolutt anbefale til andre.",published_at:"2024-05-15"}]},{platform:"trustpilot",data:[{author:"Kari N.",rating:5,content:"Fantastisk service! L\xf8ste problemet mitt p\xe5 under en time. Anbefales!",published_at:"2024-03-20"},{author:"Per S.",rating:3,content:"Greit nok. Fikk hjelp til slutt, men m\xe5tte vente litt for lenge.",published_at:"2024-04-05"},{author:"Lise B.",rating:4,content:"God erfaring. Profesjonell h\xe5ndtering og grundig arbeid, men litt dyr pris.",published_at:"2024-04-20"}]},{platform:"yelp",data:[{author:"Erik L.",rating:4,content:"Flinke folk – kunne v\xe6rt raskere, men god kvalitet p\xe5 arbeidet.",published_at:"2024-04-01"},{author:"Ida T.",rating:5,content:"Str\xe5lende kundeservice! Rask respons og profesjonell h\xe5ndtering.",published_at:"2024-03-25"},{author:"Anders J.",rating:4,content:"Solid h\xe5ndverk og bra kundekommunikasjon. Anbefales!",published_at:"2024-05-05"}]},{platform:"facebook",data:[{author:"Petter O.",rating:4,content:"Hyggelig betjening og god kvalitet. Anbefales!",published_at:"2024-03-28"},{author:"Silje M.",rating:5,content:"Fantastisk opplevelse fra start til slutt! Kommer definitivt tilbake.",published_at:"2024-04-10"},{author:"Thomas H.",rating:5,content:"Suveren service og profesjonell h\xe5ndtering. Virkelig forn\xf8yd!",published_at:"2024-05-01"}]}],r=[];return e.forEach(e=>{let s=t.find(t=>t.platform===e);s&&s.data.forEach((t,s)=>{r.push({id:`${e}-dummy-${s}`,platform:e,author:t.author,rating:t.rating,content:t.content,published_at:t.published_at})})}),r};(0,a.useEffect)(()=>{(async function(){b(!0),y(null);try{let{data:{session:e},error:r}=await N.auth.getSession();if(r||!e)return;let s=e.user.id,{data:a,error:n}=await N.from("profiles").select("connected_review_platforms").eq("id",s).single();if(n)throw n;let l=a?.connected_review_platforms||[],i=[{name:"google",isConnected:l.includes("google")},{name:"trustpilot",isConnected:l.includes("trustpilot")},{name:"yelp",isConnected:l.includes("yelp")},{name:"facebook",isConnected:l.includes("facebook")}];if(h(i),"true"!==process.env.NEXT_PUBLIC_ENABLE_DUMMY_DATA){let{data:e,error:r}=await N.from("external_reviews").select("*").eq("user_id",s).order("published_at",{ascending:!1});r&&console.error("Error fetching external reviews:",r);let a=(e||[]).map(e=>({id:e.id,platform:e.platform,author:e.author_name,rating:e.rating,content:e.comment,published_at:e.published_at}));t(a.length>0?a:[])}else t(w(l))}catch(e){console.error("Error fetching external reviews:",e),y(e.message||"En feil oppstod ved henting av eksterne anmeldelser")}finally{b(!1)}})()},[N,!1]);let _=e=>(0,c.WU)(new Date(e),"PPP",{locale:u.nb}),E=e=>s.jsx("div",{className:"flex",children:[1,2,3,4,5].map(t=>s.jsx("span",{className:(0,d.cn)("text-lg",t<=e?"text-yellow-500":"text-gray-300"),children:"★"},t))}),S=e=>{switch(e.toLowerCase()){case"google":return{color:"#4285F4",initials:"G",displayName:"Google"};case"trustpilot":return{color:"#00B67A",initials:"TP",displayName:"Trustpilot"};case"facebook":return{color:"#1877F2",initials:"FB",displayName:"Facebook"};case"yelp":return{color:"#D32323",initials:"Y",displayName:"Yelp"};default:return{color:"#9CA3AF",initials:e.substring(0,2).toUpperCase(),displayName:e}}},q=()=>{let t=e.map(e=>e.platform);return["all",...Array.from(new Set(t))]},C=e=>{let t=S(e.platform);return(0,s.jsxs)(l.Zb,{className:"h-full flex flex-col",children:[s.jsx(l.Ol,{className:"pb-2",children:(0,s.jsxs)("div",{className:"flex items-center space-x-3",children:[s.jsx(i.qE,{children:s.jsx(i.Q5,{style:{backgroundColor:t.color,color:"#ffffff"},children:t.initials})}),(0,s.jsxs)("div",{className:"space-y-1",children:[s.jsx(l.ll,{className:"text-lg",children:e.author}),E(e.rating)]})]})}),(0,s.jsxs)(l.aY,{className:"flex-grow",children:[(0,s.jsxs)("div",{className:"flex justify-between items-center mb-2 text-sm text-gray-500",children:[s.jsx("span",{className:"font-medium",children:t.displayName}),s.jsx("span",{children:_(e.published_at)})]}),s.jsx("p",{className:"text-gray-700",children:e.content||"Ingen kommentar"})]})]},e.id)},P=()=>(0,s.jsxs)(l.Zb,{className:"mb-8",children:[s.jsx(l.Ol,{children:s.jsx(l.ll,{className:"text-xl",children:"Tilkoblede plattformer"})}),s.jsx(l.aY,{children:s.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4",children:r.map(e=>{let t=S(e.name);return s.jsx(l.Zb,{className:(0,d.cn)("border",e.isConnected?"border-green-200":"border-gray-200"),children:(0,s.jsxs)(l.aY,{className:"flex items-center p-4",children:[s.jsx(i.qE,{className:"mr-3",children:s.jsx(i.Q5,{style:{backgroundColor:t.color,color:"#ffffff"},children:t.initials})}),(0,s.jsxs)("div",{children:[s.jsx("h3",{className:"font-medium",children:t.displayName}),s.jsx("div",{className:"flex items-center mt-1",children:e.isConnected?(0,s.jsxs)("div",{className:"flex items-center text-green-600",children:[s.jsx(x.Z,{className:"h-4 w-4 mr-1"}),s.jsx("span",{className:"text-sm",children:"Tilkoblet"})]}):(0,s.jsxs)("div",{className:"flex items-center text-gray-400",children:[s.jsx(g.Z,{className:"h-4 w-4 mr-1"}),s.jsx("span",{className:"text-sm",children:"Ikke tilkoblet"})]})})]})]})},e.name)})})})]});return s.jsx(p.Z,{children:(0,s.jsxs)("div",{className:"p-6",children:[(0,s.jsxs)("div",{className:"flex justify-between items-center mb-8",children:[s.jsx("h1",{className:"text-3xl font-bold",children:"Eksterne anmeldelser"}),!1]}),(()=>{if(v)return s.jsx("div",{className:"flex justify-center items-center py-20",children:s.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-t-2 border-b-2 border-blue-500"})});if(j)return s.jsx("div",{className:"bg-red-100 border border-red-400 text-red-700 px-4 py-3 rounded mb-6",children:j});let t=P();if(0===e.length){let e=r.filter(e=>e.isConnected).length;return(0,s.jsxs)(s.Fragment,{children:[t,s.jsx(l.Zb,{children:s.jsx(l.aY,{className:"py-6",children:s.jsx("div",{className:"text-center text-gray-500",children:e>0?(0,s.jsxs)(s.Fragment,{children:[s.jsx("p",{className:"mb-4",children:"Du har ingen eksterne anmeldelser enn\xe5."}),s.jsx("p",{className:"text-sm",children:"Eksterne anmeldelser fra dine tilkoblede plattformer vil vises her n\xe5r de er tilgjengelige."})]}):(0,s.jsxs)(s.Fragment,{children:[s.jsx("p",{className:"mb-4",children:"Du har ikke koblet til noen eksterne plattformer enn\xe5."}),s.jsx("p",{className:"text-sm",children:"Koble til plattformer i innstillingene for \xe5 samle anmeldelser fra Google, Trustpilot og andre tjenester."})]})})})})]})}let a=q();return(0,s.jsxs)(s.Fragment,{children:[t,(0,s.jsxs)(o.mQ,{defaultValue:"all",className:"w-full",children:[s.jsx(o.dr,{className:"mb-6",children:a.map(e=>s.jsx(o.SP,{value:e,children:"all"===e?"Alle":S(e).displayName},e))}),a.map(t=>s.jsx(o.nU,{value:t,children:s.jsx("div",{className:"grid gap-6 md:grid-cols-2 lg:grid-cols-3",children:"all"===t?e.map(e=>C(e)):e.filter(e=>e.platform===t).map(e=>C(e))})},t))]})]})})()]})})}},76368:(e,t,r)=>{"use strict";r.d(t,{Z:()=>i});var s=r(95344),a=r(3729),n=r(8428),l=r(69226);function i({children:e}){let{session:t,isLoading:r}=(0,l.useAuth)(),i=(0,n.useRouter)();return((0,a.useEffect)(()=>{r||t||i.push("/login")},[r,t,i]),r)?s.jsx("div",{className:"flex items-center justify-center min-h-screen pointer-events-none",children:s.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-t-2 border-b-2 border-blue-500"})}):t?s.jsx(s.Fragment,{children:e}):null}},63954:(e,t,r)=>{"use strict";r.d(t,{qE:()=>k,Q5:()=>w});var s=r(95344),a=r(3729),n=r(98462),l=r(2256),i=r(16069),o=r(62409),d=r(8145);function c(){return()=>{}}var u="Avatar",[m,p]=(0,n.b)(u),[f,x]=m(u),g=a.forwardRef((e,t)=>{let{__scopeAvatar:r,...n}=e,[l,i]=a.useState("idle");return(0,s.jsx)(f,{scope:r,imageLoadingStatus:l,onImageLoadingStatusChange:i,children:(0,s.jsx)(o.WV.span,{...n,ref:t})})});g.displayName=u;var h="AvatarImage",v=a.forwardRef((e,t)=>{let{__scopeAvatar:r,src:n,onLoadingStatusChange:u=()=>{},...m}=e,p=x(h,r),f=function(e,{referrerPolicy:t,crossOrigin:r}){let s=(0,d.useSyncExternalStore)(c,()=>!0,()=>!1),n=a.useRef(null),l=s?(n.current||(n.current=new window.Image),n.current):null,[o,u]=a.useState(()=>y(l,e));return(0,i.b)(()=>{u(y(l,e))},[l,e]),(0,i.b)(()=>{let e=e=>()=>{u(e)};if(!l)return;let s=e("loaded"),a=e("error");return l.addEventListener("load",s),l.addEventListener("error",a),t&&(l.referrerPolicy=t),"string"==typeof r&&(l.crossOrigin=r),()=>{l.removeEventListener("load",s),l.removeEventListener("error",a)}},[l,r,t]),o}(n,m),g=(0,l.W)(e=>{u(e),p.onImageLoadingStatusChange(e)});return(0,i.b)(()=>{"idle"!==f&&g(f)},[f,g]),"loaded"===f?(0,s.jsx)(o.WV.img,{...m,ref:t,src:n}):null});v.displayName=h;var b="AvatarFallback",j=a.forwardRef((e,t)=>{let{__scopeAvatar:r,delayMs:n,...l}=e,i=x(b,r),[d,c]=a.useState(void 0===n);return a.useEffect(()=>{if(void 0!==n){let e=window.setTimeout(()=>c(!0),n);return()=>window.clearTimeout(e)}},[n]),d&&"loaded"!==i.imageLoadingStatus?(0,s.jsx)(o.WV.span,{...l,ref:t}):null});function y(e,t){return e?t?(e.src!==t&&(e.src=t),e.complete&&e.naturalWidth>0?"loaded":"loading"):"error":"idle"}j.displayName=b;var N=r(91626);let k=a.forwardRef(({className:e,...t},r)=>s.jsx(g,{ref:r,className:(0,N.cn)("relative flex h-10 w-10 shrink-0 overflow-hidden rounded-full",e),...t}));k.displayName=g.displayName,a.forwardRef(({className:e,...t},r)=>s.jsx(v,{ref:r,className:(0,N.cn)("aspect-square h-full w-full",e),...t})).displayName=v.displayName;let w=a.forwardRef(({className:e,...t},r)=>s.jsx(j,{ref:r,className:(0,N.cn)("flex h-full w-full items-center justify-center rounded-full bg-gray-100 text-gray-700",e),...t}));w.displayName=j.displayName},61351:(e,t,r)=>{"use strict";r.d(t,{Ol:()=>i,SZ:()=>d,Zb:()=>l,aY:()=>c,ll:()=>o});var s=r(95344),a=r(3729),n=r(91626);let l=a.forwardRef(({className:e,...t},r)=>s.jsx("div",{ref:r,className:(0,n.cn)("rounded-lg border border-gray-200 bg-white text-gray-950 shadow-sm relative pointer-events-auto",e),...t}));l.displayName="Card";let i=a.forwardRef(({className:e,...t},r)=>s.jsx("div",{ref:r,className:(0,n.cn)("flex flex-col space-y-1.5 p-6 pointer-events-auto",e),...t}));i.displayName="CardHeader";let o=a.forwardRef(({className:e,...t},r)=>s.jsx("h3",{ref:r,className:(0,n.cn)("text-2xl font-semibold leading-none tracking-tight",e),...t}));o.displayName="CardTitle";let d=a.forwardRef(({className:e,...t},r)=>s.jsx("p",{ref:r,className:(0,n.cn)("text-sm text-gray-500",e),...t}));d.displayName="CardDescription";let c=a.forwardRef(({className:e,...t},r)=>s.jsx("div",{ref:r,className:(0,n.cn)("p-6 pt-0 pointer-events-auto",e),...t}));c.displayName="CardContent",a.forwardRef(({className:e,...t},r)=>s.jsx("div",{ref:r,className:(0,n.cn)("flex items-center p-6 pt-0 pointer-events-auto",e),...t})).displayName="CardFooter"},15746:(e,t,r)=>{"use strict";r.d(t,{SP:()=>d,dr:()=>o,mQ:()=>i,nU:()=>c});var s=r(95344),a=r(3729),n=r(31736),l=r(91626);let i=n.fC,o=a.forwardRef(({className:e,...t},r)=>s.jsx(n.aV,{ref:r,className:(0,l.cn)("inline-flex h-10 items-center justify-center rounded-md bg-muted p-1 text-muted-foreground",e),...t}));o.displayName=n.aV.displayName;let d=a.forwardRef(({className:e,...t},r)=>s.jsx(n.xz,{ref:r,className:(0,l.cn)("inline-flex items-center justify-center whitespace-nowrap rounded-sm px-3 py-1.5 text-sm font-medium ring-offset-background transition-all focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 data-[state=active]:bg-background data-[state=active]:text-foreground data-[state=active]:shadow-sm",e),...t}));d.displayName=n.xz.displayName;let c=a.forwardRef(({className:e,...t},r)=>s.jsx(n.VY,{ref:r,className:(0,l.cn)("mt-2 ring-offset-background focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2",e),...t}));c.displayName=n.VY.displayName},62312:(e,t,r)=>{"use strict";r.d(t,{Z:()=>s});let s=(0,r(97075).Z)("check",[["path",{d:"M20 6 9 17l-5-5",key:"1gmf2c"}]])},30080:(e,t,r)=>{"use strict";/**
 * @license React
 * use-sync-external-store-shim.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var s=r(3729),a="function"==typeof Object.is?Object.is:function(e,t){return e===t&&(0!==e||1/e==1/t)||e!=e&&t!=t},n=s.useState,l=s.useEffect,i=s.useLayoutEffect,o=s.useDebugValue;function d(e){var t=e.getSnapshot;e=e.value;try{var r=t();return!a(e,r)}catch(e){return!0}}var c="undefined"==typeof window||void 0===window.document||void 0===window.document.createElement?function(e,t){return t()}:function(e,t){var r=t(),s=n({inst:{value:r,getSnapshot:t}}),a=s[0].inst,c=s[1];return i(function(){a.value=r,a.getSnapshot=t,d(a)&&c({inst:a})},[e,r,t]),l(function(){return d(a)&&c({inst:a}),e(function(){d(a)&&c({inst:a})})},[e]),o(r),r};t.useSyncExternalStore=void 0!==s.useSyncExternalStore?s.useSyncExternalStore:c},8145:(e,t,r)=>{"use strict";e.exports=r(30080)},10801:(e,t,r)=>{"use strict";r.r(t),r.d(t,{$$typeof:()=>n,__esModule:()=>a,default:()=>l});let s=(0,r(86843).createProxy)(String.raw`/Users/ulrikdalanfjellstad/Desktop/Revlo/app/dashboard/reviews/external/page.tsx`),{__esModule:a,$$typeof:n}=s,l=s.default}};var t=require("../../../../webpack-runtime.js");t.C(e);var r=e=>t(t.s=e),s=t.X(0,[1638,5620,6506,2441,4021,8554],()=>r(10216));module.exports=s})();