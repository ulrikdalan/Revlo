(()=>{var e={};e.id=7025,e.ids=[7025],e.modules={47849:e=>{"use strict";e.exports=require("next/dist/client/components/action-async-storage.external")},72934:e=>{"use strict";e.exports=require("next/dist/client/components/action-async-storage.external.js")},55403:e=>{"use strict";e.exports=require("next/dist/client/components/request-async-storage.external")},54580:e=>{"use strict";e.exports=require("next/dist/client/components/request-async-storage.external.js")},94749:e=>{"use strict";e.exports=require("next/dist/client/components/static-generation-async-storage.external")},45869:e=>{"use strict";e.exports=require("next/dist/client/components/static-generation-async-storage.external.js")},20399:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},14300:e=>{"use strict";e.exports=require("buffer")},6113:e=>{"use strict";e.exports=require("crypto")},82361:e=>{"use strict";e.exports=require("events")},13685:e=>{"use strict";e.exports=require("http")},95687:e=>{"use strict";e.exports=require("https")},41808:e=>{"use strict";e.exports=require("net")},85477:e=>{"use strict";e.exports=require("punycode")},12781:e=>{"use strict";e.exports=require("stream")},24404:e=>{"use strict";e.exports=require("tls")},57310:e=>{"use strict";e.exports=require("url")},59796:e=>{"use strict";e.exports=require("zlib")},57842:(e,t,s)=>{"use strict";s.r(t),s.d(t,{GlobalError:()=>i.a,__next_app__:()=>p,originalPathname:()=>x,pages:()=>c,routeModule:()=>m,tree:()=>o});var r=s(50482),a=s(69108),l=s(62563),i=s.n(l),n=s(68300),d={};for(let e in n)0>["default","tree","pages","GlobalError","originalPathname","__next_app__","routeModule"].indexOf(e)&&(d[e]=()=>n[e]);s.d(t,d);let o=["",{children:["dashboard",{children:["overview",{children:["__PAGE__",{},{page:[()=>Promise.resolve().then(s.bind(s,73763)),"/Users/ulrikdalanfjellstad/Desktop/Revlo/app/dashboard/overview/page.tsx"]}]},{}]},{layout:[()=>Promise.resolve().then(s.bind(s,96339)),"/Users/ulrikdalanfjellstad/Desktop/Revlo/app/dashboard/layout.tsx"]}]},{layout:[()=>Promise.resolve().then(s.bind(s,91429)),"/Users/ulrikdalanfjellstad/Desktop/Revlo/app/layout.tsx"],"not-found":[()=>Promise.resolve().then(s.t.bind(s,69361,23)),"next/dist/client/components/not-found-error"]}],c=["/Users/ulrikdalanfjellstad/Desktop/Revlo/app/dashboard/overview/page.tsx"],x="/dashboard/overview/page",p={require:s,loadChunk:()=>Promise.resolve()},m=new r.AppPageRouteModule({definition:{kind:a.x.APP_PAGE,page:"/dashboard/overview/page",pathname:"/dashboard/overview",bundlePath:"",filename:"",appPaths:[]},userland:{loaderTree:o}})},55581:(e,t,s)=>{Promise.resolve().then(s.bind(s,28233)),Promise.resolve().then(s.t.bind(s,61476,23)),Promise.resolve().then(s.bind(s,38354))},38354:(e,t,s)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),Object.defineProperty(t,"BailoutToCSR",{enumerable:!0,get:function(){return a}});let r=s(63689);function a(e){let{reason:t,children:s}=e;throw new r.BailoutToCSRError(t)}},73763:(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>h,revalidate:()=>u});var r=s(25036),a=s(86323),l=s(57699),i=s(7439),n=s(16274),d=s(85984),o=s.n(d);s(40002);let c=()=>r.jsx("div",{className:"flex justify-center items-center py-4",children:r.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-t-2 border-b-2 border-blue-500"})});var x=s(96184);let p=o()(()=>s.e(5758).then(s.bind(s,5758)),{loadableGenerated:{modules:["/Users/ulrikdalanfjellstad/Desktop/Revlo/app/dashboard/overview/page.tsx -> @/app/dashboard/reviews/RecentExternalReviews"]},loading:()=>r.jsx(c,{})});async function m(e){let t=(0,a.eI)("https://rfexljxsabsbfbszzvjf.supabase.co",process.env.SUPABASE_SERVICE_ROLE_KEY),s=[];try{let{data:r,error:a}=await t.from("sent_emails").select("*").eq("user_id",e).order("sent_at",{ascending:!1});if(a)throw console.error("Error fetching email data:",a),a;s=r||[]}catch(e){throw console.error("Error in Supabase query:",e),e}let r=s.length,l=s.filter(e=>null!==e.reminder_sent_at).length,i=s.filter(e=>null!==e.clicked_at).length,n={};s.forEach(e=>{n[e.status]=(n[e.status]||0)+1});let d=Object.entries(n).map(([e,t])=>({status:e,count:t})),o=[],c=new Date;for(let e=6;e>=0;e--){let t=new Date(c);t.setDate(t.getDate()-e);let r=t.toISOString().split("T")[0],a=s.filter(e=>new Date(e.sent_at).toISOString().split("T")[0]===r).length,l=s.filter(e=>!!e.reminder_sent_at&&new Date(e.reminder_sent_at).toISOString().split("T")[0]===r).length,i=s.filter(e=>!!e.clicked_at&&new Date(e.clicked_at).toISOString().split("T")[0]===r).length;o.push({date:r,sent:a,reminders:l,clicks:i})}return{totalEmails:r,remindersCount:l,clickedCount:i,conversionRate:r>0?i/r*100:0,weeklyData:o,allEmails:s,statusCounts:d}}let u=0;async function h(){let e;let t=(0,l.createServerComponentClient)({cookies:i.cookies}),{data:{session:s}}=await t.auth.getSession();if(!s||!s.user)return r.jsx("div",{className:"min-h-screen bg-gradient-to-br from-blue-50 via-indigo-50 to-slate-50 p-6",children:r.jsx("div",{className:"max-w-7xl mx-auto",children:(0,r.jsxs)(x.Zb,{className:"border-0 shadow-lg overflow-hidden",children:[r.jsx("div",{className:"absolute top-0 left-0 right-0 h-1 bg-gradient-to-r from-red-600 to-red-700"}),r.jsx(x.aY,{className:"p-6",children:(0,r.jsxs)("div",{className:"bg-red-50 p-6 rounded-xl border border-red-100 mb-6",children:[r.jsx("h2",{className:"text-lg font-semibold text-red-800 mb-2",children:"Ikke innlogget"}),r.jsx("p",{className:"mb-4",children:"Du m\xe5 v\xe6re logget inn for \xe5 se denne siden."}),r.jsx(n.default,{href:"/login",className:"inline-flex items-center justify-center px-6 py-3 rounded-xl text-white bg-gradient-to-r from-red-600 to-red-700 font-semibold shadow-md hover:shadow-lg transition-all duration-200 hover:-translate-y-0.5",children:"G\xe5 til innloggingssiden"})]})})]})})});let a=null;try{e=await m(s.user.id)}catch(t){console.error("Error in overview page:",t),a=t,e={totalEmails:0,remindersCount:0,clickedCount:0,conversionRate:0,weeklyData:[],allEmails:[],statusCounts:[]}}function d(e){return e?new Date(e).toLocaleDateString("no-NO",{day:"2-digit",month:"2-digit",year:"numeric",hour:"2-digit",minute:"2-digit"}):"-"}return r.jsx("div",{className:"min-h-screen bg-gradient-to-br from-blue-50 via-indigo-50 to-slate-50 p-6",children:(0,r.jsxs)("div",{className:"max-w-7xl mx-auto",children:[(0,r.jsxs)(x.Zb,{className:"mb-6 border-0 shadow-lg overflow-hidden",children:[r.jsx("div",{className:"absolute top-0 left-0 right-0 h-1 bg-gradient-to-r from-blue-600 to-indigo-600"}),r.jsx(x.Ol,{children:r.jsx(x.ll,{className:"text-2xl font-bold",children:"Oversikt over e-postaktivitet"})})]}),a?(0,r.jsxs)(x.Zb,{className:"border-0 shadow-lg overflow-hidden",children:[r.jsx("div",{className:"absolute top-0 left-0 right-0 h-1 bg-gradient-to-r from-red-600 to-red-700"}),r.jsx(x.aY,{className:"p-6",children:(0,r.jsxs)("div",{className:"bg-red-50 p-6 rounded-xl border border-red-100",children:[r.jsx("p",{className:"font-semibold text-red-800",children:"Det oppstod en feil ved henting av data:"}),r.jsx("p",{className:"text-red-700",children:String(a)})]})})]}):(0,r.jsxs)("div",{className:"space-y-6",children:[(0,r.jsxs)("div",{className:"grid gap-6 grid-cols-1 md:grid-cols-2",children:[(0,r.jsxs)(x.Zb,{className:"border-0 shadow-lg overflow-hidden",children:[r.jsx("div",{className:"absolute top-0 left-0 right-0 h-1 bg-gradient-to-r from-blue-600 to-indigo-600"}),r.jsx(x.Ol,{className:"pb-2",children:r.jsx(x.ll,{children:"Nyeste anmeldelser"})}),r.jsx(x.aY,{children:r.jsx(p,{})})]}),(0,r.jsxs)(x.Zb,{className:"border-0 shadow-lg overflow-hidden",children:[r.jsx("div",{className:"absolute top-0 left-0 right-0 h-1 bg-gradient-to-r from-blue-600 to-indigo-600"}),r.jsx(x.Ol,{className:"pb-2",children:r.jsx(x.ll,{children:"Statistikk"})}),r.jsx(x.aY,{children:(0,r.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[(0,r.jsxs)("div",{className:"bg-gradient-to-br from-blue-50 to-white p-4 rounded-xl border border-blue-100 shadow-md",children:[r.jsx("h3",{className:"text-lg font-semibold text-blue-800 mb-2",children:"Totale foresp\xf8rsler"}),r.jsx("p",{className:"text-3xl font-bold text-blue-700",children:e.totalEmails})]}),(0,r.jsxs)("div",{className:"bg-gradient-to-br from-green-50 to-white p-4 rounded-xl border border-green-100 shadow-md",children:[r.jsx("h3",{className:"text-lg font-semibold text-green-800 mb-2",children:"Sendte p\xe5minnelser"}),r.jsx("p",{className:"text-3xl font-bold text-green-700",children:e.remindersCount})]}),(0,r.jsxs)("div",{className:"bg-gradient-to-br from-yellow-50 to-white p-4 rounded-xl border border-yellow-100 shadow-md",children:[r.jsx("h3",{className:"text-lg font-semibold text-yellow-800 mb-2",children:"Klikket p\xe5 lenke"}),r.jsx("p",{className:"text-3xl font-bold text-yellow-700",children:e.clickedCount})]}),(0,r.jsxs)("div",{className:"bg-gradient-to-br from-purple-50 to-white p-4 rounded-xl border border-purple-100 shadow-md",children:[r.jsx("h3",{className:"text-lg font-semibold text-purple-800 mb-2",children:"Konverteringsrate"}),(0,r.jsxs)("p",{className:"text-3xl font-bold text-purple-700",children:[e.conversionRate.toFixed(1),"%"]})]})]})})]})]}),(0,r.jsxs)(x.Zb,{className:"border-0 shadow-lg overflow-hidden",children:[r.jsx("div",{className:"absolute top-0 left-0 right-0 h-1 bg-gradient-to-r from-blue-600 to-indigo-600"}),r.jsx(x.Ol,{className:"pb-2",children:r.jsx(x.ll,{children:"Status fordeling"})}),r.jsx(x.aY,{children:r.jsx("div",{className:"flex flex-wrap gap-4",children:e.statusCounts.map((t,s)=>(0,r.jsxs)("div",{className:"flex-1 min-w-[150px] p-5 rounded-xl shadow-sm transition-transform duration-200 hover:-translate-y-1",style:{background:"SENT"===t.status?"linear-gradient(135deg, #e6f7ff 0%, #ffffff 100%)":"REMINDER_SENT"===t.status?"linear-gradient(135deg, #f0f9eb 0%, #ffffff 100%)":"linear-gradient(135deg, #f9f0ff 0%, #ffffff 100%)",border:"SENT"===t.status?"1px solid #91caff":"REMINDER_SENT"===t.status?"1px solid #b7eb8f":"1px solid #d3adf7"},children:[r.jsx("div",{className:"text-lg font-semibold",children:t.status}),r.jsx("div",{className:"text-2xl font-bold",children:t.count}),(0,r.jsxs)("div",{className:"text-sm",children:[Math.round(t.count/e.totalEmails*100),"% av alle"]})]},s))})})]}),(0,r.jsxs)(x.Zb,{className:"border-0 shadow-lg overflow-hidden",children:[r.jsx("div",{className:"absolute top-0 left-0 right-0 h-1 bg-gradient-to-r from-blue-600 to-indigo-600"}),r.jsx(x.Ol,{className:"pb-2",children:r.jsx(x.ll,{children:"Ukentlig aktivitet"})}),r.jsx(x.aY,{children:r.jsx("div",{className:"overflow-x-auto",children:(0,r.jsxs)("table",{className:"min-w-full divide-y divide-gray-200 rounded-xl overflow-hidden",children:[r.jsx("thead",{className:"bg-gray-50",children:(0,r.jsxs)("tr",{children:[r.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Dato"}),r.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Sendte foresp\xf8rsler"}),r.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Sendte p\xe5minnelser"}),r.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Klikk p\xe5 lenke"})]})}),r.jsx("tbody",{children:e.weeklyData.map((e,t)=>(0,r.jsxs)("tr",{className:t%2==0?"bg-gray-50":"bg-white",children:[r.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm font-medium text-gray-900",children:e.date}),r.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500",children:e.sent}),r.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500",children:e.reminders}),r.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500",children:e.clicks})]},t))})]})})})]}),(0,r.jsxs)(x.Zb,{className:"border-0 shadow-lg overflow-hidden",children:[r.jsx("div",{className:"absolute top-0 left-0 right-0 h-1 bg-gradient-to-r from-blue-600 to-indigo-600"}),r.jsx(x.Ol,{className:"pb-2",children:r.jsx(x.ll,{children:"Nylige foresp\xf8rsler"})}),r.jsx(x.aY,{children:(0,r.jsxs)("div",{className:"overflow-x-auto",children:[(0,r.jsxs)("table",{className:"min-w-full divide-y divide-gray-200 rounded-xl overflow-hidden",children:[r.jsx("thead",{className:"bg-gray-50",children:(0,r.jsxs)("tr",{children:[r.jsx("th",{scope:"col",className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Navn"}),r.jsx("th",{scope:"col",className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"E-post"}),r.jsx("th",{scope:"col",className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Status"}),r.jsx("th",{scope:"col",className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Sendt"}),r.jsx("th",{scope:"col",className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"P\xe5minnelse"}),r.jsx("th",{scope:"col",className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Klikket"})]})}),r.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:e.allEmails.slice(0,10).map(e=>(0,r.jsxs)("tr",{className:"hover:bg-gray-50 transition-colors",children:[r.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900",children:e.name}),r.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500",children:e.email}),r.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:r.jsx("span",{className:`px-3 py-1 inline-flex text-xs leading-5 font-semibold rounded-full ${"SENT"===e.status?"bg-green-100 text-green-800":"bg-yellow-100 text-yellow-800"}`,children:e.status})}),r.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500",children:d(e.sent_at)}),r.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500",children:e.reminder_sent_at?d(e.reminder_sent_at):"-"}),r.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500",children:e.clicked_at?(0,r.jsxs)("span",{className:"flex items-center",children:[r.jsx("span",{className:"mr-2 w-2 h-2 bg-green-500 rounded-full"}),d(e.clicked_at)]}):(0,r.jsxs)("span",{className:"flex items-center",children:[r.jsx("span",{className:"mr-2 w-2 h-2 bg-gray-300 rounded-full"}),"Nei"]})})]},e.id))})]}),e.allEmails.length>10&&r.jsx("div",{className:"mt-6 text-center",children:(0,r.jsxs)(n.default,{href:"/dashboard/sent-reviews",className:"inline-flex items-center justify-center px-6 py-3 rounded-xl text-white bg-gradient-to-r from-blue-600 to-indigo-600 font-semibold shadow-md hover:shadow-lg transition-all duration-200 hover:-translate-y-0.5",children:["Se alle (",e.allEmails.length,")"]})})]})})]})]})]})})}},96184:(e,t,s)=>{"use strict";s.d(t,{Ol:()=>n,SZ:()=>o,Zb:()=>i,aY:()=>c,ll:()=>d});var r=s(25036),a=s(40002),l=s(95752);let i=a.forwardRef(({className:e,...t},s)=>r.jsx("div",{ref:s,className:(0,l.cn)("rounded-lg border border-gray-200 bg-white text-gray-950 shadow-sm relative pointer-events-auto",e),...t}));i.displayName="Card";let n=a.forwardRef(({className:e,...t},s)=>r.jsx("div",{ref:s,className:(0,l.cn)("flex flex-col space-y-1.5 p-6 pointer-events-auto",e),...t}));n.displayName="CardHeader";let d=a.forwardRef(({className:e,...t},s)=>r.jsx("h3",{ref:s,className:(0,l.cn)("text-2xl font-semibold leading-none tracking-tight",e),...t}));d.displayName="CardTitle";let o=a.forwardRef(({className:e,...t},s)=>r.jsx("p",{ref:s,className:(0,l.cn)("text-sm text-gray-500",e),...t}));o.displayName="CardDescription";let c=a.forwardRef(({className:e,...t},s)=>r.jsx("div",{ref:s,className:(0,l.cn)("p-6 pt-0 pointer-events-auto",e),...t}));c.displayName="CardContent",a.forwardRef(({className:e,...t},s)=>r.jsx("div",{ref:s,className:(0,l.cn)("flex items-center p-6 pt-0 pointer-events-auto",e),...t})).displayName="CardFooter"},95752:(e,t,s)=>{"use strict";s.d(t,{cn:()=>l});var r=s(70990),a=s(81774);function l(...e){return(0,a.m6)((0,r.W)(e))}},85984:(e,t,s)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),Object.defineProperty(t,"default",{enumerable:!0,get:function(){return l}});let r=s(46783);s(25036),s(40002);let a=r._(s(9494));function l(e,t){let s={loading:e=>{let{error:t,isLoading:s,pastDelay:r}=e;return null}};return"function"==typeof e&&(s.loader=e),(0,a.default)({...s,...t})}("function"==typeof t.default||"object"==typeof t.default&&null!==t.default)&&void 0===t.default.__esModule&&(Object.defineProperty(t.default,"__esModule",{value:!0}),Object.assign(t.default,t),e.exports=t.default)},33505:(e,t,s)=>{"use strict";let{createProxy:r}=s(86843);e.exports=r("/Users/ulrikdalanfjellstad/Desktop/Revlo/node_modules/next/dist/shared/lib/lazy-dynamic/dynamic-bailout-to-csr.js")},9494:(e,t,s)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),Object.defineProperty(t,"default",{enumerable:!0,get:function(){return d}});let r=s(25036),a=s(40002),l=s(33505);function i(e){var t;return{default:null!=(t=null==e?void 0:e.default)?t:e}}let n={loader:()=>Promise.resolve(i(()=>null)),loading:null,ssr:!0},d=function(e){let t={...n,...e},s=(0,a.lazy)(()=>t.loader().then(i)),d=t.loading;function o(e){let i=d?(0,r.jsx)(d,{isLoading:!0,pastDelay:!0,error:null}):null,n=t.ssr?(0,r.jsx)(s,{...e}):(0,r.jsx)(l.BailoutToCSR,{reason:"next/dynamic",children:(0,r.jsx)(s,{...e})});return(0,r.jsx)(a.Suspense,{fallback:i,children:n})}return o.displayName="LoadableComponent",o}}};var t=require("../../../webpack-runtime.js");t.C(e);var s=e=>t(t.s=e),r=t.X(0,[1638,5665,5620,3421,6506,2441,4824,8554,8233],()=>s(57842));module.exports=r})();