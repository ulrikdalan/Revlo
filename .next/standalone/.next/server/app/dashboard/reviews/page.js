(()=>{var e={};e.id=2696,e.ids=[2696],e.modules={47849:e=>{"use strict";e.exports=require("next/dist/client/components/action-async-storage.external")},72934:e=>{"use strict";e.exports=require("next/dist/client/components/action-async-storage.external.js")},55403:e=>{"use strict";e.exports=require("next/dist/client/components/request-async-storage.external")},54580:e=>{"use strict";e.exports=require("next/dist/client/components/request-async-storage.external.js")},94749:e=>{"use strict";e.exports=require("next/dist/client/components/static-generation-async-storage.external")},45869:e=>{"use strict";e.exports=require("next/dist/client/components/static-generation-async-storage.external.js")},20399:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},14300:e=>{"use strict";e.exports=require("buffer")},6113:e=>{"use strict";e.exports=require("crypto")},82361:e=>{"use strict";e.exports=require("events")},13685:e=>{"use strict";e.exports=require("http")},95687:e=>{"use strict";e.exports=require("https")},41808:e=>{"use strict";e.exports=require("net")},85477:e=>{"use strict";e.exports=require("punycode")},12781:e=>{"use strict";e.exports=require("stream")},24404:e=>{"use strict";e.exports=require("tls")},57310:e=>{"use strict";e.exports=require("url")},59796:e=>{"use strict";e.exports=require("zlib")},92863:(e,s,r)=>{"use strict";r.r(s),r.d(s,{GlobalError:()=>n.a,__next_app__:()=>u,originalPathname:()=>m,pages:()=>c,routeModule:()=>p,tree:()=>d});var t=r(50482),l=r(69108),a=r(62563),n=r.n(a),o=r(68300),i={};for(let e in o)0>["default","tree","pages","GlobalError","originalPathname","__next_app__","routeModule"].indexOf(e)&&(i[e]=()=>o[e]);r.d(s,i);let d=["",{children:["dashboard",{children:["reviews",{children:["__PAGE__",{},{page:[()=>Promise.resolve().then(r.bind(r,60145)),"/Users/ulrikdalanfjellstad/Desktop/Revlo/app/dashboard/reviews/page.tsx"]}]},{}]},{layout:[()=>Promise.resolve().then(r.bind(r,96339)),"/Users/ulrikdalanfjellstad/Desktop/Revlo/app/dashboard/layout.tsx"]}]},{layout:[()=>Promise.resolve().then(r.bind(r,91429)),"/Users/ulrikdalanfjellstad/Desktop/Revlo/app/layout.tsx"],"not-found":[()=>Promise.resolve().then(r.t.bind(r,69361,23)),"next/dist/client/components/not-found-error"]}],c=["/Users/ulrikdalanfjellstad/Desktop/Revlo/app/dashboard/reviews/page.tsx"],m="/dashboard/reviews/page",u={require:r,loadChunk:()=>Promise.resolve()},p=new t.AppPageRouteModule({definition:{kind:l.x.APP_PAGE,page:"/dashboard/reviews/page",pathname:"/dashboard/reviews",bundlePath:"",filename:"",appPaths:[]},userland:{loaderTree:d}})},89916:(e,s,r)=>{Promise.resolve().then(r.bind(r,69232))},69232:(e,s,r)=>{"use strict";r.r(s),r.d(s,{default:()=>p,revalidate:()=>u});var t=r(95344),l=r(57435),a=r(3729),n=r(56506),o=r(61351),i=r(76368);function d(){let[e,s]=(0,a.useState)(""),[r,l]=(0,a.useState)(""),[n,o]=(0,a.useState)(""),[i,d]=(0,a.useState)(!1),[c,m]=(0,a.useState)(!1),[u,p]=(0,a.useState)([]),[x,h]=(0,a.useState)(""),[b,g]=(0,a.useState)(""),[f,v]=(0,a.useState)(""),[j,y]=(0,a.useState)(!1);(0,a.useEffect)(()=>{(async()=>{y(!0);try{let e=await fetch("/api/email-templates",{method:"GET",headers:{"Content-Type":"application/json"}});if(!e.ok)throw Error("Kunne ikke hente e-postmaler");let s=await e.json();p(s.templates||[])}catch(e){console.error("Error fetching email templates:",e)}finally{y(!1)}})()},[]);let w=async t=>{t.preventDefault(),d(!0);try{let t=await fetch("/api/send-review-request",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({name:e,email:r,reviewLink:n,subject:b,body:f})});if(!t.ok){let e=await t.json();throw Error(e.error||"Feil ved sending av e-post")}m(!0),s(""),l(""),o(""),h(""),g(""),v("")}catch(e){alert(e.message)}finally{d(!1)}};return(0,t.jsxs)("form",{onSubmit:w,className:"space-y-4 max-w-md mx-auto",children:[(0,t.jsxs)("div",{children:[t.jsx("label",{htmlFor:"template",className:"block text-sm font-medium text-gray-700 mb-1",children:"Velg e-postmal (valgfritt)"}),(0,t.jsxs)("select",{id:"template",value:x,onChange:e=>{let s=e.target.value;if(h(s),s){let e=u.find(e=>e.id===s);e&&(g(e.subject),v(e.content))}else g(""),v("")},className:"border px-4 py-2 w-full rounded",disabled:j,children:[t.jsx("option",{value:"",children:"Velg mal..."}),u.map(e=>t.jsx("option",{value:e.id,children:e.name},e.id))]})]}),(0,t.jsxs)("div",{children:[t.jsx("label",{htmlFor:"name",className:"block text-sm font-medium text-gray-700 mb-1",children:"Navn"}),t.jsx("input",{id:"name",type:"text",placeholder:"Kundens navn",value:e,onChange:e=>s(e.target.value),className:"border px-4 py-2 w-full rounded",required:!0})]}),(0,t.jsxs)("div",{children:[t.jsx("label",{htmlFor:"email",className:"block text-sm font-medium text-gray-700 mb-1",children:"E-post"}),t.jsx("input",{id:"email",type:"email",placeholder:"Kundens e-postadresse",value:r,onChange:e=>l(e.target.value),className:"border px-4 py-2 w-full rounded",required:!0})]}),(0,t.jsxs)("div",{children:[t.jsx("label",{htmlFor:"reviewLink",className:"block text-sm font-medium text-gray-700 mb-1",children:"Anmeldelseslenke"}),t.jsx("input",{id:"reviewLink",type:"text",placeholder:"https://...",value:n,onChange:e=>o(e.target.value),className:"border px-4 py-2 w-full rounded",required:!0})]}),(0,t.jsxs)("div",{children:[t.jsx("label",{htmlFor:"subject",className:"block text-sm font-medium text-gray-700 mb-1",children:"E-post emne"}),t.jsx("input",{id:"subject",type:"text",placeholder:"Emne for e-posten",value:b,onChange:e=>g(e.target.value),className:"border px-4 py-2 w-full rounded",required:!0})]}),(0,t.jsxs)("div",{children:[t.jsx("label",{htmlFor:"content",className:"block text-sm font-medium text-gray-700 mb-1",children:"E-post innhold"}),(0,t.jsxs)("p",{className:"text-xs text-gray-500 mb-1",children:["Tips: Bruk ","{{name}}"," for kundens navn og ","{{link}}"," for anmeldelseslenken."]}),t.jsx("textarea",{id:"content",placeholder:"Innhold for e-posten...",value:f,onChange:e=>v(e.target.value),className:"border px-4 py-2 w-full rounded",rows:6,required:!0})]}),t.jsx("button",{type:"submit",disabled:i,className:"bg-blue-600 text-white px-4 py-2 rounded hover:bg-blue-700 transition-colors disabled:opacity-50",children:i?"Sender...":"Send vurderingsforesp\xf8rsel"}),c&&t.jsx("div",{className:"bg-green-100 text-green-700 p-3 rounded",children:"E-post sendt! Kunden vil motta en e-post med anmeldelseslenken."})]})}function c(){let[e,s]=(0,a.useState)(!1),[r,l]=(0,a.useState)(null),n=async()=>{s(!0),l(null);try{let e=await fetch("/api/send-reminders",{method:"POST",headers:{"Content-Type":"application/json"}}),s=await e.json();if(!e.ok)throw Error(s.error||"Feil ved sending av p\xe5minnelser");l({success:!0,message:s.message||`${s.sentCount} p\xe5minnelser ble sendt`})}catch(e){console.error("Error sending reminders:",e),l({success:!1,message:e.message})}finally{s(!1)}};return(0,t.jsxs)("div",{className:"my-6 p-4 bg-gray-50 rounded-lg border border-gray-200",children:[t.jsx("h2",{className:"text-xl font-semibold mb-2",children:"Automatiske p\xe5minnelser"}),t.jsx("p",{className:"text-gray-600 mb-4",children:"Send p\xe5minnelser til kunder som ikke har klikket p\xe5 sin vurderingslenke etter 2 dager."}),(0,t.jsxs)("div",{className:"flex items-center space-x-4",children:[t.jsx("button",{onClick:n,disabled:e,className:"bg-blue-600 text-white px-4 py-2 rounded hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-blue-500 focus:ring-offset-2 transition-colors flex items-center disabled:opacity-50",children:e?(0,t.jsxs)(t.Fragment,{children:[(0,t.jsxs)("svg",{className:"animate-spin -ml-1 mr-2 h-4 w-4 text-white",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",children:[t.jsx("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),t.jsx("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]}),"Sender p\xe5minnelser..."]}):"Send p\xe5minnelser"}),r&&t.jsx("div",{className:`text-sm ${r.success?"text-green-600":"text-red-600"}`,children:r.message})]})]})}var m=r(28233);let u=0;function p(){let[e,s]=(0,a.useState)(!0),[r,u]=(0,a.useState)(null);return(0,a.useEffect)(()=>{(async function(){let e=(0,l.createClientComponentClient)(),{data:{session:r}}=await e.auth.getSession();r&&r.user&&u(r.user),s(!1)})()},[]),t.jsx("div",{className:"min-h-screen bg-gradient-to-br from-blue-50 via-indigo-50 to-slate-50 p-6",children:(0,t.jsxs)("div",{className:"max-w-7xl mx-auto",children:[(0,t.jsxs)(o.Zb,{className:"mb-6 border-0 shadow-lg overflow-hidden",children:[t.jsx("div",{className:"absolute top-0 left-0 right-0 h-1 bg-gradient-to-r from-blue-600 to-indigo-600"}),t.jsx(o.Ol,{children:t.jsx(o.ll,{className:"text-2xl font-bold",children:"Anmeldelser"})})]}),(0,t.jsxs)(i.Z,{children:[(0,t.jsxs)("div",{className:"grid gap-6 grid-cols-1 lg:grid-cols-12",children:[t.jsx("div",{className:"lg:col-span-5",children:(0,t.jsxs)(o.Zb,{className:"h-full border-0 shadow-lg overflow-hidden",children:[t.jsx("div",{className:"absolute top-0 left-0 right-0 h-1 bg-gradient-to-r from-blue-600 to-indigo-600"}),t.jsx(o.Ol,{children:t.jsx(o.ll,{children:"Send anmeldelsesforesp\xf8rsel"})}),t.jsx(o.aY,{className:"p-6",children:t.jsx(d,{})})]})}),t.jsx("div",{className:"lg:col-span-7",children:(0,t.jsxs)(o.Zb,{className:"h-full border-0 shadow-lg overflow-hidden",children:[t.jsx("div",{className:"absolute top-0 left-0 right-0 h-1 bg-gradient-to-r from-blue-600 to-indigo-600"}),(0,t.jsxs)(o.Ol,{className:"flex flex-row justify-between items-center pb-2",children:[t.jsx(o.ll,{children:"Nylige eksterne anmeldelser"}),(0,t.jsxs)("div",{className:"flex space-x-2",children:[t.jsx(n.default,{href:"/dashboard/sent-reviews",className:"inline-flex items-center justify-center px-4 py-2 rounded-lg text-sm text-blue-700 bg-blue-50 border border-blue-100 font-medium hover:bg-blue-100 transition-colors",children:"Se sendte foresp\xf8rsler"}),t.jsx(n.default,{href:"/dashboard/reviews/external",className:"inline-flex items-center justify-center px-4 py-2 rounded-lg text-sm text-indigo-700 bg-indigo-50 border border-indigo-100 font-medium hover:bg-indigo-100 transition-colors",children:"Se alle eksterne"})]})]}),(0,t.jsxs)(o.aY,{className:"p-6",children:[t.jsx("div",{className:"mb-4",children:t.jsx(c,{})}),t.jsx(m.default,{})]})]})})]}),t.jsx("div",{className:"mt-6",children:(0,t.jsxs)(o.Zb,{className:"border-0 shadow-lg overflow-hidden",children:[t.jsx("div",{className:"absolute top-0 left-0 right-0 h-1 bg-gradient-to-r from-blue-600 to-indigo-600"}),t.jsx(o.Ol,{children:t.jsx(o.ll,{children:"Importer eksterne anmeldelser"})}),t.jsx(o.aY,{className:"p-6",children:(0,t.jsxs)("div",{className:"grid gap-6 grid-cols-1 md:grid-cols-3",children:[(0,t.jsxs)("div",{className:"bg-gradient-to-br from-blue-50 to-white p-6 rounded-xl border border-blue-100 shadow-md hover:shadow-lg transition-all duration-200 hover:-translate-y-1",children:[t.jsx("h3",{className:"text-lg font-semibold text-blue-800 mb-3",children:"Google anmeldelser"}),t.jsx("p",{className:"text-gray-600 mb-4",children:"Importer anmeldelser fra Google My Business for \xe5 f\xe5 en helhetlig oversikt."}),t.jsx(n.default,{href:"/dashboard/reviews/import/google",className:"inline-flex items-center justify-center px-4 py-2 rounded-lg text-sm text-white bg-gradient-to-r from-blue-600 to-blue-700 font-medium hover:from-blue-700 hover:to-blue-800 transition-colors",children:"Importer fra Google"})]}),(0,t.jsxs)("div",{className:"bg-gradient-to-br from-yellow-50 to-white p-6 rounded-xl border border-yellow-100 shadow-md hover:shadow-lg transition-all duration-200 hover:-translate-y-1",children:[t.jsx("h3",{className:"text-lg font-semibold text-yellow-800 mb-3",children:"Tripadvisor anmeldelser"}),t.jsx("p",{className:"text-gray-600 mb-4",children:"Hent inn dine Tripadvisor-anmeldelser for \xe5 f\xe5 en samlet oversikt."}),t.jsx(n.default,{href:"/dashboard/reviews/import/tripadvisor",className:"inline-flex items-center justify-center px-4 py-2 rounded-lg text-sm text-white bg-gradient-to-r from-yellow-600 to-yellow-700 font-medium hover:from-yellow-700 hover:to-yellow-800 transition-colors",children:"Importer fra Tripadvisor"})]}),(0,t.jsxs)("div",{className:"bg-gradient-to-br from-purple-50 to-white p-6 rounded-xl border border-purple-100 shadow-md hover:shadow-lg transition-all duration-200 hover:-translate-y-1",children:[t.jsx("h3",{className:"text-lg font-semibold text-purple-800 mb-3",children:"Facebook anmeldelser"}),t.jsx("p",{className:"text-gray-600 mb-4",children:"Samle dine Facebook-anmeldelser for en komplett oversikt."}),t.jsx(n.default,{href:"/dashboard/reviews/import/facebook",className:"inline-flex items-center justify-center px-4 py-2 rounded-lg text-sm text-white bg-gradient-to-r from-purple-600 to-purple-700 font-medium hover:from-purple-700 hover:to-purple-800 transition-colors",children:"Importer fra Facebook"})]})]})})]})})]})]})})}},76368:(e,s,r)=>{"use strict";r.d(s,{Z:()=>o});var t=r(95344),l=r(3729),a=r(8428),n=r(69226);function o({children:e}){let{session:s,isLoading:r}=(0,n.useAuth)(),o=(0,a.useRouter)();return((0,l.useEffect)(()=>{r||s||o.push("/login")},[r,s,o]),r)?t.jsx("div",{className:"flex items-center justify-center min-h-screen pointer-events-none",children:t.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-t-2 border-b-2 border-blue-500"})}):s?t.jsx(t.Fragment,{children:e}):null}},60145:(e,s,r)=>{"use strict";r.r(s),r.d(s,{$$typeof:()=>n,__esModule:()=>a,default:()=>d,revalidate:()=>i});var t=r(86843);let l=(0,t.createProxy)(String.raw`/Users/ulrikdalanfjellstad/Desktop/Revlo/app/dashboard/reviews/page.tsx`),{__esModule:a,$$typeof:n}=l,o=l.default,i=(0,t.createProxy)(String.raw`/Users/ulrikdalanfjellstad/Desktop/Revlo/app/dashboard/reviews/page.tsx#revalidate`),d=o}};var s=require("../../../webpack-runtime.js");s.C(e);var r=e=>s(s.s=e),t=s.X(0,[1638,5620,6506,2441,8554,8233],()=>r(92863));module.exports=t})();