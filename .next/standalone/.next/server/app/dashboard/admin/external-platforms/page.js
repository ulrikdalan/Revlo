(()=>{var e={};e.id=7966,e.ids=[7966],e.modules={47849:e=>{"use strict";e.exports=require("next/dist/client/components/action-async-storage.external")},72934:e=>{"use strict";e.exports=require("next/dist/client/components/action-async-storage.external.js")},55403:e=>{"use strict";e.exports=require("next/dist/client/components/request-async-storage.external")},54580:e=>{"use strict";e.exports=require("next/dist/client/components/request-async-storage.external.js")},94749:e=>{"use strict";e.exports=require("next/dist/client/components/static-generation-async-storage.external")},45869:e=>{"use strict";e.exports=require("next/dist/client/components/static-generation-async-storage.external.js")},20399:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},14300:e=>{"use strict";e.exports=require("buffer")},6113:e=>{"use strict";e.exports=require("crypto")},82361:e=>{"use strict";e.exports=require("events")},13685:e=>{"use strict";e.exports=require("http")},95687:e=>{"use strict";e.exports=require("https")},41808:e=>{"use strict";e.exports=require("net")},85477:e=>{"use strict";e.exports=require("punycode")},12781:e=>{"use strict";e.exports=require("stream")},24404:e=>{"use strict";e.exports=require("tls")},57310:e=>{"use strict";e.exports=require("url")},59796:e=>{"use strict";e.exports=require("zlib")},90506:(e,r,s)=>{"use strict";s.r(r),s.d(r,{GlobalError:()=>n.a,__next_app__:()=>u,originalPathname:()=>m,pages:()=>c,routeModule:()=>x,tree:()=>d});var t=s(50482),a=s(69108),l=s(62563),n=s.n(l),i=s(68300),o={};for(let e in i)0>["default","tree","pages","GlobalError","originalPathname","__next_app__","routeModule"].indexOf(e)&&(o[e]=()=>i[e]);s.d(r,o);let d=["",{children:["dashboard",{children:["admin",{children:["external-platforms",{children:["__PAGE__",{},{page:[()=>Promise.resolve().then(s.bind(s,46868)),"/Users/ulrikdalanfjellstad/Desktop/Revlo/app/dashboard/admin/external-platforms/page.tsx"]}]},{}]},{}]},{layout:[()=>Promise.resolve().then(s.bind(s,96339)),"/Users/ulrikdalanfjellstad/Desktop/Revlo/app/dashboard/layout.tsx"]}]},{layout:[()=>Promise.resolve().then(s.bind(s,91429)),"/Users/ulrikdalanfjellstad/Desktop/Revlo/app/layout.tsx"],"not-found":[()=>Promise.resolve().then(s.t.bind(s,69361,23)),"next/dist/client/components/not-found-error"]}],c=["/Users/ulrikdalanfjellstad/Desktop/Revlo/app/dashboard/admin/external-platforms/page.tsx"],m="/dashboard/admin/external-platforms/page",u={require:s,loadChunk:()=>Promise.resolve()},x=new t.AppPageRouteModule({definition:{kind:a.x.APP_PAGE,page:"/dashboard/admin/external-platforms/page",pathname:"/dashboard/admin/external-platforms",bundlePath:"",filename:"",appPaths:[]},userland:{loaderTree:d}})},22197:(e,r,s)=>{Promise.resolve().then(s.bind(s,91098))},73946:(e,r,s)=>{"use strict";s.r(r),s.d(r,{default:()=>i});var t=s(95344),a=s(56506),l=s(8428),n=s(91626);function i(){let e=(0,l.usePathname)();return(0,t.jsxs)("div",{className:"bg-white rounded shadow p-4 mb-6",children:[t.jsx("div",{className:"mb-4",children:t.jsx(a.default,{href:"/dashboard",className:"text-blue-600 hover:underline",children:"â† Tilbake til dashboard"})}),t.jsx("div",{className:"flex space-x-4 border-b border-gray-200",children:[{name:"Admin Dashboard",href:"/dashboard/admin"},{name:"Eksterne anmeldelser",href:"/dashboard/admin/reviews"},{name:"Review Platforms",href:"/dashboard/admin/external-platforms"}].map(r=>t.jsx(a.default,{href:r.href,className:(0,n.cn)("px-3 py-2 text-sm font-medium border-b-2 -mb-px transition-colors",e===r.href?"border-blue-500 text-blue-600":"border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300"),children:r.name},r.href))})]})}},91098:(e,r,s)=>{"use strict";s.r(r),s.d(r,{default:()=>x});var t=s(95344),a=s(3729),l=s(57435),n=s(61351),i=s(16212),o=s(92549),d=s(54572),c=s(73946),m=s(76368),u=s(56506);function x(){let[e,r]=(0,a.useState)([]),[s,x]=(0,a.useState)(!0),[p,h]=(0,a.useState)(null),[f,g]=(0,a.useState)(!1),[b,v]=(0,a.useState)({name:"",display_name:"",icon:"",color:"#3b82f6"}),[y,j]=(0,a.useState)(!1),N=(0,l.createClientComponentClient)();(0,a.useEffect)(()=>{async function e(){try{let{data:{session:e}}=await N.auth.getSession();if(!e)return!1;let{data:r,error:s}=await N.from("profiles").select("is_admin").eq("id",e.user.id).single();if(s)throw s;return r?.is_admin||!1}catch(e){return console.error("Error checking admin status:",e),!1}}(async function(){x(!0);try{let s=await e();if(g(s),!s){h("You do not have permission to access this page"),x(!1);return}let{data:t,error:a}=await N.from("platforms").select("*").order("name");if(a)throw a;r(t||[])}catch(e){console.error("Error loading platforms:",e),h(e.message||"An error occurred while loading platforms")}finally{x(!1)}})()},[N]);let w=async s=>{s.preventDefault(),j(!0);try{let{data:s,error:t}=await N.from("platforms").insert({name:b.name.toLowerCase(),display_name:b.display_name,icon:b.icon,color:b.color}).select();if(t)throw t;r([...e,s[0]]),v({name:"",display_name:"",icon:"",color:"#3b82f6"})}catch(e){console.error("Error adding platform:",e),h(e.message||"An error occurred while adding the platform")}finally{j(!1)}},k=async s=>{if(confirm("Are you sure you want to delete this platform?"))try{let{error:t}=await N.from("platforms").delete().eq("id",s);if(t)throw t;r(e.filter(e=>e.id!==s))}catch(e){console.error("Error deleting platform:",e),h(e.message||"An error occurred while deleting the platform")}};return f||s?t.jsx(m.Z,{children:t.jsx("div",{className:"min-h-screen bg-gray-100 p-6",children:(0,t.jsxs)("div",{className:"max-w-7xl mx-auto",children:[t.jsx(c.default,{}),(0,t.jsxs)("div",{className:"flex justify-between items-center mb-6",children:[t.jsx("h1",{className:"text-2xl font-bold",children:"Manage External Review Platforms"}),(0,t.jsxs)("div",{className:"flex space-x-4",children:[(0,t.jsxs)(u.default,{href:"/dashboard/admin/external-platforms/docs",className:"text-blue-600 hover:underline flex items-center",children:[t.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5 mr-1",viewBox:"0 0 20 20",fill:"currentColor",children:t.jsx("path",{fillRule:"evenodd",d:"M4 4a2 2 0 012-2h4.586A2 2 0 0112 2.586L15.414 6A2 2 0 0116 7.414V16a2 2 0 01-2 2H6a2 2 0 01-2-2V4zm2 6a1 1 0 011-1h6a1 1 0 110 2H7a1 1 0 01-1-1zm1 3a1 1 0 100 2h6a1 1 0 100-2H7z",clipRule:"evenodd"})}),"Documentation"]}),(0,t.jsxs)(u.default,{href:"/api/platform-migration",target:"_blank",className:"text-green-600 hover:underline flex items-center",children:[t.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5 mr-1",viewBox:"0 0 20 20",fill:"currentColor",children:t.jsx("path",{fillRule:"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zm1-11a1 1 0 10-2 0v2H7a1 1 0 100 2h2v2a1 1 0 102 0v-2h2a1 1 0 100-2h-2V7z",clipRule:"evenodd"})}),"Run Migration"]})]})]}),p&&t.jsx("div",{className:"bg-red-100 border border-red-400 text-red-700 px-4 py-3 rounded mb-6",children:p}),s?t.jsx("div",{className:"flex justify-center items-center py-10",children:t.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-t-2 border-b-2 border-blue-500"})}):(0,t.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6",children:[t.jsx("div",{className:"md:col-span-2",children:(0,t.jsxs)(n.Zb,{children:[t.jsx(n.Ol,{children:t.jsx(n.ll,{children:"Platforms"})}),t.jsx(n.aY,{children:0===e.length?t.jsx("p",{className:"text-gray-500",children:"No platforms defined yet."}):t.jsx("div",{className:"overflow-x-auto",children:(0,t.jsxs)("table",{className:"w-full",children:[t.jsx("thead",{children:(0,t.jsxs)("tr",{className:"border-b",children:[t.jsx("th",{className:"px-4 py-2 text-left",children:"Name"}),t.jsx("th",{className:"px-4 py-2 text-left",children:"Display Name"}),t.jsx("th",{className:"px-4 py-2 text-left",children:"Color"}),t.jsx("th",{className:"px-4 py-2 text-left",children:"Actions"})]})}),t.jsx("tbody",{children:e.map(e=>(0,t.jsxs)("tr",{className:"border-b",children:[t.jsx("td",{className:"px-4 py-2",children:(0,t.jsxs)("div",{className:"flex items-center",children:[t.jsx("div",{className:"w-8 h-8 rounded-full flex items-center justify-center mr-2 text-sm",style:{backgroundColor:e.color||"#e5e7eb",color:"white"},children:e.icon||e.name.substring(0,1).toUpperCase()}),e.name]})}),t.jsx("td",{className:"px-4 py-2",children:e.display_name}),t.jsx("td",{className:"px-4 py-2",children:(0,t.jsxs)("div",{className:"flex items-center",children:[t.jsx("div",{className:"w-4 h-4 rounded mr-2",style:{backgroundColor:e.color||"#e5e7eb"}}),e.color||"Not set"]})}),t.jsx("td",{className:"px-4 py-2",children:t.jsx(i.z,{variant:"destructive",size:"sm",onClick:()=>k(e.id),children:"Delete"})})]},e.id))})]})})})]})}),t.jsx("div",{children:(0,t.jsxs)(n.Zb,{children:[t.jsx(n.Ol,{children:t.jsx(n.ll,{children:"Add Platform"})}),t.jsx(n.aY,{children:(0,t.jsxs)("form",{onSubmit:w,className:"space-y-4",children:[(0,t.jsxs)("div",{className:"space-y-2",children:[t.jsx(d._,{htmlFor:"name",children:"Platform Code"}),t.jsx(o.I,{id:"name",value:b.name,onChange:e=>v({...b,name:e.target.value}),placeholder:"google",required:!0}),t.jsx("p",{className:"text-xs text-gray-500",children:"Lowercase, no spaces (e.g., google, trustpilot)"})]}),(0,t.jsxs)("div",{className:"space-y-2",children:[t.jsx(d._,{htmlFor:"display_name",children:"Display Name"}),t.jsx(o.I,{id:"display_name",value:b.display_name,onChange:e=>v({...b,display_name:e.target.value}),placeholder:"Google",required:!0})]}),(0,t.jsxs)("div",{className:"space-y-2",children:[t.jsx(d._,{htmlFor:"icon",children:"Icon (optional)"}),t.jsx(o.I,{id:"icon",value:b.icon,onChange:e=>v({...b,icon:e.target.value}),placeholder:"G"}),t.jsx("p",{className:"text-xs text-gray-500",children:"Short text (1-2 characters) for icon display"})]}),(0,t.jsxs)("div",{className:"space-y-2",children:[t.jsx(d._,{htmlFor:"color",children:"Color"}),(0,t.jsxs)("div",{className:"flex items-center space-x-2",children:[t.jsx(o.I,{id:"color",type:"color",value:b.color,onChange:e=>v({...b,color:e.target.value}),className:"w-16 h-10"}),t.jsx(o.I,{type:"text",value:b.color,onChange:e=>v({...b,color:e.target.value}),placeholder:"#3b82f6",className:"flex-1"})]})]}),t.jsx(i.z,{type:"submit",className:"w-full",disabled:y,children:y?"Adding...":"Add Platform"})]})})]})})]})]})})}):t.jsx(m.Z,{children:t.jsx("div",{className:"min-h-screen bg-gray-100 p-6",children:t.jsx("div",{className:"max-w-7xl mx-auto",children:t.jsx("div",{className:"bg-red-100 border border-red-400 text-red-700 px-4 py-3 rounded mb-6",children:"You do not have permission to access this page"})})})})}},76368:(e,r,s)=>{"use strict";s.d(r,{Z:()=>i});var t=s(95344),a=s(3729),l=s(8428),n=s(69226);function i({children:e}){let{session:r,isLoading:s}=(0,n.useAuth)(),i=(0,l.useRouter)();return((0,a.useEffect)(()=>{s||r||i.push("/login")},[s,r,i]),s)?t.jsx("div",{className:"flex items-center justify-center min-h-screen pointer-events-none",children:t.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-t-2 border-b-2 border-blue-500"})}):r?t.jsx(t.Fragment,{children:e}):null}},16212:(e,r,s)=>{"use strict";s.d(r,{z:()=>d});var t=s(95344),a=s(3729),l=s(32751),n=s(49247),i=s(91626);let o=(0,n.j)("inline-flex items-center justify-center rounded-md text-sm font-medium ring-offset-background transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:opacity-50 relative",{variants:{variant:{default:"bg-blue-600 text-white hover:bg-blue-700",destructive:"bg-red-600 text-white hover:bg-red-700",outline:"border border-input bg-background hover:bg-accent hover:text-accent-foreground",secondary:"bg-gray-200 text-gray-900 hover:bg-gray-300",ghost:"hover:bg-accent hover:text-accent-foreground",link:"text-blue-600 underline-offset-4 hover:underline"},size:{default:"h-10 px-4 py-2",sm:"h-9 rounded-md px-3",lg:"h-11 rounded-md px-8",icon:"h-10 w-10"}},defaultVariants:{variant:"default",size:"default"}}),d=a.forwardRef(({className:e,variant:r,size:s,asChild:a=!1,disabled:n,...d},c)=>{let m=a?l.g7:"button";return t.jsx(m,{className:(0,i.cn)(o({variant:r,size:s,className:e}),n?"pointer-events-none":"pointer-events-auto"),ref:c,disabled:n,...d})});d.displayName="Button"},61351:(e,r,s)=>{"use strict";s.d(r,{Ol:()=>i,SZ:()=>d,Zb:()=>n,aY:()=>c,ll:()=>o});var t=s(95344),a=s(3729),l=s(91626);let n=a.forwardRef(({className:e,...r},s)=>t.jsx("div",{ref:s,className:(0,l.cn)("rounded-lg border border-gray-200 bg-white text-gray-950 shadow-sm relative pointer-events-auto",e),...r}));n.displayName="Card";let i=a.forwardRef(({className:e,...r},s)=>t.jsx("div",{ref:s,className:(0,l.cn)("flex flex-col space-y-1.5 p-6 pointer-events-auto",e),...r}));i.displayName="CardHeader";let o=a.forwardRef(({className:e,...r},s)=>t.jsx("h3",{ref:s,className:(0,l.cn)("text-2xl font-semibold leading-none tracking-tight",e),...r}));o.displayName="CardTitle";let d=a.forwardRef(({className:e,...r},s)=>t.jsx("p",{ref:s,className:(0,l.cn)("text-sm text-gray-500",e),...r}));d.displayName="CardDescription";let c=a.forwardRef(({className:e,...r},s)=>t.jsx("div",{ref:s,className:(0,l.cn)("p-6 pt-0 pointer-events-auto",e),...r}));c.displayName="CardContent",a.forwardRef(({className:e,...r},s)=>t.jsx("div",{ref:s,className:(0,l.cn)("flex items-center p-6 pt-0 pointer-events-auto",e),...r})).displayName="CardFooter"},92549:(e,r,s)=>{"use strict";s.d(r,{I:()=>n});var t=s(95344),a=s(3729),l=s(91626);let n=a.forwardRef(({className:e,type:r,...s},a)=>t.jsx("input",{type:r,className:(0,l.cn)("flex h-10 w-full rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background file:border-0 file:bg-transparent file:text-sm file:font-medium placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50",e),ref:a,...s}));n.displayName="Input"},54572:(e,r,s)=>{"use strict";s.d(r,{_:()=>c});var t=s(95344),a=s(3729),l=s(62409),n=a.forwardRef((e,r)=>(0,t.jsx)(l.WV.label,{...e,ref:r,onMouseDown:r=>{r.target.closest("button, input, select, textarea")||(e.onMouseDown?.(r),!r.defaultPrevented&&r.detail>1&&r.preventDefault())}}));n.displayName="Label";var i=s(49247),o=s(91626);let d=(0,i.j)("text-sm font-medium leading-none peer-disabled:cursor-not-allowed peer-disabled:opacity-70"),c=a.forwardRef(({className:e,...r},s)=>t.jsx(n,{ref:s,className:(0,o.cn)(d(),e),...r}));c.displayName=n.displayName},72164:(e,r,s)=>{"use strict";s.d(r,{Z:()=>t});let t=(0,s(97075).Z)("chart-no-axes-column-increasing",[["line",{x1:"12",x2:"12",y1:"20",y2:"10",key:"1vz5eb"}],["line",{x1:"18",x2:"18",y1:"20",y2:"4",key:"cun8e5"}],["line",{x1:"6",x2:"6",y1:"20",y2:"16",key:"hq0ia6"}]])},89486:(e,r,s)=>{"use strict";s.d(r,{Z:()=>t});let t=(0,s(97075).Z)("house",[["path",{d:"M15 21v-8a1 1 0 0 0-1-1h-4a1 1 0 0 0-1 1v8",key:"5wwlr5"}],["path",{d:"M3 10a2 2 0 0 1 .709-1.528l7-5.999a2 2 0 0 1 2.582 0l7 5.999A2 2 0 0 1 21 10v9a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2z",key:"1d0kgt"}]])},36135:(e,r,s)=>{"use strict";s.d(r,{Z:()=>t});let t=(0,s(97075).Z)("send",[["path",{d:"M14.536 21.686a.5.5 0 0 0 .937-.024l6.5-19a.496.496 0 0 0-.635-.635l-19 6.5a.5.5 0 0 0-.024.937l7.93 3.18a2 2 0 0 1 1.112 1.11z",key:"1ffxy3"}],["path",{d:"m21.854 2.147-10.94 10.939",key:"12cjpa"}]])},46868:(e,r,s)=>{"use strict";s.r(r),s.d(r,{$$typeof:()=>l,__esModule:()=>a,default:()=>n});let t=(0,s(86843).createProxy)(String.raw`/Users/ulrikdalanfjellstad/Desktop/Revlo/app/dashboard/admin/external-platforms/page.tsx`),{__esModule:a,$$typeof:l}=t,n=t.default}};var r=require("../../../../webpack-runtime.js");r.C(e);var s=e=>r(r.s=e),t=r.X(0,[1638,5620,6506,8554],()=>s(90506));module.exports=t})();