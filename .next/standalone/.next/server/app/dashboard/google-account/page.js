(()=>{var e={};e.id=328,e.ids=[328],e.modules={47849:e=>{"use strict";e.exports=require("next/dist/client/components/action-async-storage.external")},72934:e=>{"use strict";e.exports=require("next/dist/client/components/action-async-storage.external.js")},55403:e=>{"use strict";e.exports=require("next/dist/client/components/request-async-storage.external")},54580:e=>{"use strict";e.exports=require("next/dist/client/components/request-async-storage.external.js")},94749:e=>{"use strict";e.exports=require("next/dist/client/components/static-generation-async-storage.external")},45869:e=>{"use strict";e.exports=require("next/dist/client/components/static-generation-async-storage.external.js")},20399:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},14300:e=>{"use strict";e.exports=require("buffer")},6113:e=>{"use strict";e.exports=require("crypto")},82361:e=>{"use strict";e.exports=require("events")},13685:e=>{"use strict";e.exports=require("http")},95687:e=>{"use strict";e.exports=require("https")},41808:e=>{"use strict";e.exports=require("net")},85477:e=>{"use strict";e.exports=require("punycode")},12781:e=>{"use strict";e.exports=require("stream")},24404:e=>{"use strict";e.exports=require("tls")},57310:e=>{"use strict";e.exports=require("url")},59796:e=>{"use strict";e.exports=require("zlib")},51760:(e,r,t)=>{"use strict";t.r(r),t.d(r,{GlobalError:()=>n.a,__next_app__:()=>p,originalPathname:()=>u,pages:()=>c,routeModule:()=>x,tree:()=>d});var s=t(50482),a=t(69108),o=t(62563),n=t.n(o),l=t(68300),i={};for(let e in l)0>["default","tree","pages","GlobalError","originalPathname","__next_app__","routeModule"].indexOf(e)&&(i[e]=()=>l[e]);t.d(r,i);let d=["",{children:["dashboard",{children:["google-account",{children:["__PAGE__",{},{page:[()=>Promise.resolve().then(t.bind(t,97229)),"/Users/ulrikdalanfjellstad/Desktop/Revlo/app/dashboard/google-account/page.tsx"]}]},{}]},{layout:[()=>Promise.resolve().then(t.bind(t,96339)),"/Users/ulrikdalanfjellstad/Desktop/Revlo/app/dashboard/layout.tsx"]}]},{layout:[()=>Promise.resolve().then(t.bind(t,91429)),"/Users/ulrikdalanfjellstad/Desktop/Revlo/app/layout.tsx"],"not-found":[()=>Promise.resolve().then(t.t.bind(t,69361,23)),"next/dist/client/components/not-found-error"]}],c=["/Users/ulrikdalanfjellstad/Desktop/Revlo/app/dashboard/google-account/page.tsx"],u="/dashboard/google-account/page",p={require:t,loadChunk:()=>Promise.resolve()},x=new s.AppPageRouteModule({definition:{kind:a.x.APP_PAGE,page:"/dashboard/google-account/page",pathname:"/dashboard/google-account",bundlePath:"",filename:"",appPaths:[]},userland:{loaderTree:d}})},48579:(e,r,t)=>{Promise.resolve().then(t.bind(t,40275))},40275:(e,r,t)=>{"use strict";t.r(r),t.d(r,{default:()=>u});var s=t(95344),a=t(3729),o=t(57435),n=t(61351),l=t(16212),i=t(8428),d=t(56506),c=t(76368);function u(){let[e,r]=(0,a.useState)(null),[t,u]=(0,a.useState)(!0),[p,x]=(0,a.useState)(null),[g,m]=(0,a.useState)(null),h=(0,i.useSearchParams)(),f=(0,o.createClientComponentClient)(),b=h.get("success"),v=h.get("error"),y=h.get("place_name");(0,a.useEffect)(()=>{b&&y&&m(y),v&&x(v),async function(){u(!0);try{let{data:{session:e},error:t}=await f.auth.getSession();if(t||!e)return;let{data:s,error:a}=await f.from("google_accounts").select("*").eq("user_id",e.user.id).single();if(a&&"PGRST116"!==a.code)throw a;s&&(r(s),!y&&s.place_id&&await j(s.place_id))}catch(e){console.error("Error fetching Google account:",e),x(e.message||"En feil oppstod ved henting av Google-kontoinformasjon")}finally{u(!1)}}()},[f,b,v,y]);let j=async e=>{try{m("Din virksomhet")}catch(e){console.error("Error fetching business name:",e)}},k=async()=>{try{u(!0);let{data:{session:e},error:t}=await f.auth.getSession();if(t||!e){x("Du m\xe5 v\xe6re logget inn for \xe5 utf\xf8re denne handlingen");return}let{error:s}=await f.from("google_accounts").delete().eq("user_id",e.user.id);if(s)throw s;r(null),m(null),x(null)}catch(e){console.error("Error disconnecting Google account:",e),x(e.message||"En feil oppstod ved frakobling av Google-konto")}finally{u(!1)}};return s.jsx(c.Z,{children:s.jsx("div",{className:"min-h-screen bg-gray-100 p-6",children:(0,s.jsxs)("div",{className:"max-w-4xl mx-auto",children:[(0,s.jsxs)("div",{className:"flex justify-between items-center mb-6",children:[s.jsx("h1",{className:"text-2xl font-bold",children:"Google-kontotilkobling"}),s.jsx(d.default,{href:"/dashboard",className:"text-blue-600 hover:underline",children:"← Tilbake til dashboard"})]}),p&&s.jsx("div",{className:"bg-red-100 border border-red-400 text-red-700 px-4 py-3 rounded mb-6",children:s.jsx("p",{children:p})}),(0,s.jsxs)(n.Zb,{children:[(0,s.jsxs)(n.Ol,{children:[s.jsx(n.ll,{children:"Google My Business"}),s.jsx(n.SZ,{children:"Koble til din Google-konto for \xe5 administrere anmeldelser fra Google My Business"})]}),s.jsx(n.aY,{children:t?s.jsx("div",{className:"flex justify-center items-center py-10",children:s.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-t-2 border-b-2 border-blue-500"})}):e?s.jsx("div",{className:"space-y-6",children:(0,s.jsxs)("div",{className:"bg-green-50 p-4 rounded-lg border border-green-200",children:[s.jsx("h3",{className:"text-lg font-semibold text-green-800 mb-2",children:"Google-konto tilkoblet"}),g&&(0,s.jsxs)("p",{className:"mb-4",children:[s.jsx("span",{className:"font-medium",children:"Virksomhet:"})," ",g]}),(0,s.jsxs)("p",{className:"mb-4",children:[s.jsx("span",{className:"font-medium",children:"Google Place ID:"})," ",e.place_id]}),(0,s.jsxs)("p",{className:"mb-4",children:[s.jsx("span",{className:"font-medium",children:"Tilkoblet:"})," ",new Date(e.created_at).toLocaleString("no-NO")]}),(0,s.jsxs)("div",{className:"flex space-x-4",children:[s.jsx(l.z,{onClick:k,disabled:t,className:"bg-red-600 hover:bg-red-700",children:"Koble fra Google-konto"}),s.jsx(d.default,{href:"/dashboard/reviews/external/test-import",className:"bg-blue-600 hover:bg-blue-700 text-white px-4 py-2 rounded flex items-center",children:"Importer Google-anmeldelser"})]})]})}):s.jsx("div",{className:"space-y-6",children:(0,s.jsxs)("div",{className:"bg-blue-50 p-4 rounded-lg border border-blue-200",children:[s.jsx("h3",{className:"text-lg font-semibold text-blue-800 mb-2",children:"Koble til Google-konto"}),s.jsx("p",{className:"mb-4",children:"Ved \xe5 koble til din Google-konto kan du enkelt importere anmeldelser fra Google My Business."}),s.jsx("p",{className:"mb-4",children:"Du trenger en Google-konto som har tilgang til en Google My Business-oppf\xf8ring."}),s.jsx("div",{children:s.jsx("a",{href:"/api/google/auth",className:"bg-blue-600 text-white px-4 py-2 rounded hover:bg-blue-700 inline-block",children:"Koble til Google"})})]})})})]})]})})})}},76368:(e,r,t)=>{"use strict";t.d(r,{Z:()=>l});var s=t(95344),a=t(3729),o=t(8428),n=t(69226);function l({children:e}){let{session:r,isLoading:t}=(0,n.useAuth)(),l=(0,o.useRouter)();return((0,a.useEffect)(()=>{t||r||l.push("/login")},[t,r,l]),t)?s.jsx("div",{className:"flex items-center justify-center min-h-screen pointer-events-none",children:s.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-t-2 border-b-2 border-blue-500"})}):r?s.jsx(s.Fragment,{children:e}):null}},16212:(e,r,t)=>{"use strict";t.d(r,{z:()=>d});var s=t(95344),a=t(3729),o=t(32751),n=t(49247),l=t(91626);let i=(0,n.j)("inline-flex items-center justify-center rounded-md text-sm font-medium ring-offset-background transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:opacity-50 relative",{variants:{variant:{default:"bg-blue-600 text-white hover:bg-blue-700",destructive:"bg-red-600 text-white hover:bg-red-700",outline:"border border-input bg-background hover:bg-accent hover:text-accent-foreground",secondary:"bg-gray-200 text-gray-900 hover:bg-gray-300",ghost:"hover:bg-accent hover:text-accent-foreground",link:"text-blue-600 underline-offset-4 hover:underline"},size:{default:"h-10 px-4 py-2",sm:"h-9 rounded-md px-3",lg:"h-11 rounded-md px-8",icon:"h-10 w-10"}},defaultVariants:{variant:"default",size:"default"}}),d=a.forwardRef(({className:e,variant:r,size:t,asChild:a=!1,disabled:n,...d},c)=>{let u=a?o.g7:"button";return s.jsx(u,{className:(0,l.cn)(i({variant:r,size:t,className:e}),n?"pointer-events-none":"pointer-events-auto"),ref:c,disabled:n,...d})});d.displayName="Button"},61351:(e,r,t)=>{"use strict";t.d(r,{Ol:()=>l,SZ:()=>d,Zb:()=>n,aY:()=>c,ll:()=>i});var s=t(95344),a=t(3729),o=t(91626);let n=a.forwardRef(({className:e,...r},t)=>s.jsx("div",{ref:t,className:(0,o.cn)("rounded-lg border border-gray-200 bg-white text-gray-950 shadow-sm relative pointer-events-auto",e),...r}));n.displayName="Card";let l=a.forwardRef(({className:e,...r},t)=>s.jsx("div",{ref:t,className:(0,o.cn)("flex flex-col space-y-1.5 p-6 pointer-events-auto",e),...r}));l.displayName="CardHeader";let i=a.forwardRef(({className:e,...r},t)=>s.jsx("h3",{ref:t,className:(0,o.cn)("text-2xl font-semibold leading-none tracking-tight",e),...r}));i.displayName="CardTitle";let d=a.forwardRef(({className:e,...r},t)=>s.jsx("p",{ref:t,className:(0,o.cn)("text-sm text-gray-500",e),...r}));d.displayName="CardDescription";let c=a.forwardRef(({className:e,...r},t)=>s.jsx("div",{ref:t,className:(0,o.cn)("p-6 pt-0 pointer-events-auto",e),...r}));c.displayName="CardContent",a.forwardRef(({className:e,...r},t)=>s.jsx("div",{ref:t,className:(0,o.cn)("flex items-center p-6 pt-0 pointer-events-auto",e),...r})).displayName="CardFooter"},72164:(e,r,t)=>{"use strict";t.d(r,{Z:()=>s});let s=(0,t(97075).Z)("chart-no-axes-column-increasing",[["line",{x1:"12",x2:"12",y1:"20",y2:"10",key:"1vz5eb"}],["line",{x1:"18",x2:"18",y1:"20",y2:"4",key:"cun8e5"}],["line",{x1:"6",x2:"6",y1:"20",y2:"16",key:"hq0ia6"}]])},89486:(e,r,t)=>{"use strict";t.d(r,{Z:()=>s});let s=(0,t(97075).Z)("house",[["path",{d:"M15 21v-8a1 1 0 0 0-1-1h-4a1 1 0 0 0-1 1v8",key:"5wwlr5"}],["path",{d:"M3 10a2 2 0 0 1 .709-1.528l7-5.999a2 2 0 0 1 2.582 0l7 5.999A2 2 0 0 1 21 10v9a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2z",key:"1d0kgt"}]])},36135:(e,r,t)=>{"use strict";t.d(r,{Z:()=>s});let s=(0,t(97075).Z)("send",[["path",{d:"M14.536 21.686a.5.5 0 0 0 .937-.024l6.5-19a.496.496 0 0 0-.635-.635l-19 6.5a.5.5 0 0 0-.024.937l7.93 3.18a2 2 0 0 1 1.112 1.11z",key:"1ffxy3"}],["path",{d:"m21.854 2.147-10.94 10.939",key:"12cjpa"}]])},97229:(e,r,t)=>{"use strict";t.r(r),t.d(r,{$$typeof:()=>o,__esModule:()=>a,default:()=>n});let s=(0,t(86843).createProxy)(String.raw`/Users/ulrikdalanfjellstad/Desktop/Revlo/app/dashboard/google-account/page.tsx`),{__esModule:a,$$typeof:o}=s,n=s.default}};var r=require("../../../webpack-runtime.js");r.C(e);var t=e=>r(r.s=e),s=r.X(0,[1638,5620,6506,8554],()=>t(51760));module.exports=s})();